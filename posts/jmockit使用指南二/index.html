<!DOCTYPE html>
<html><meta charset="utf-8">
<meta name="renderer" content="webkit">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">


<meta name="keywords" content="">
<meta name="description" content="">

<title>JMockit使用指南(二)</title>

<link rel="icon" href="https://fzyho.github.io/theme/head-icon-3.png">


<meta name="generator" content="Hugo 0.107.0">




<link rel="stylesheet" href="/css/main.min.css">
<div class="fixed-header-slide">
    <div class="fixed-header-wrap">
        <header class="header">
            <nav class="nav">
                <div class="logo">
                    
                    <a href="https://fzyho.github.io/">
                        <img src="/theme/title-1.png" alt="logo" aria-label="logo"
                            height="30px">
                    </a>
                </div>
                <ul class="menu">
                    <li>
                        <a href="https://fzyho.github.io/docs/quic" title="QUIC协议(RFC)">
                            <span>QUIC协议(RFC)</span>
                        </a>
                    </li>
                    <li>
                        <a href="https://fzyho.github.io/archives" title="Archives">
                            <span>Archives</span>
                        </a>
                    </li></ul>
            </nav>
            
        </header>
    </div>
</div><body>
		<main class="content">







  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3&#43;Aro6EYUG4&#43;cU&#43;KJWu/X" crossorigin="anonymous">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" integrity="sha384-g7c&#43;Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI&#43;sEnkvrMWph2EDg4" crossorigin="anonymous"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js" integrity="sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC&#43;Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa" crossorigin="anonymous"></script>


<script>
  document.addEventListener('DOMContentLoaded', function () {
    'use strict';
    
    
    var tables = document.querySelectorAll('.post-body > table');
    for (let i = 0; i < tables.length; i++) {
      var table = tables[i];
      var wrapper = document.createElement('div');
      wrapper.className = 'table-wrapper';
      table.parentElement.replaceChild(wrapper, table);
      wrapper.appendChild(table);
    }
    


    
    
      var mathElements = document.getElementsByClassName('math');
      var options = {
        delimiters: [
          { left: "$$", right: "$$", display: true },
          { left: "$$\n", right: "\n$$", display: true },
          { left: "$", right: "$", display: false },
        ],
      };

      renderMathInElement(document.querySelector('.post-body'), options);
    
    
  });
</script>


<div class="wrapper-toc">
    <div class="toc">
		
		
		
			<div class="toc-content">
			
				
				
				
				<div style="margin: auto; text-align: center;font-weight: bolder;">- 目录 -</div>
				
				
				<ul></ul>
				
					
					
						
							
							
							
								
									<ul>
								
							
							
							
								<li>
									<a href="#record%e5%bd%95%e5%88%b6" onclick="onNavClick(`#record录制-nav`)" id="record录制-nav" class="animated-visibility">
										Record(录制)
									</a>
								</li>
							
							
						
					
				
					
					
						
							
							
							
							
							
								<li>
									<a href="#%e5%ae%9a%e5%88%b6%e7%bb%93%e6%9e%9c" onclick="onNavClick(`#定制结果-nav`)" id="定制结果-nav" class="animated-visibility">
										定制结果
									</a>
								</li>
							
							
						
					
				
					
					
						
							
							
							
							
							
								<li>
									<a href="#%e8%87%aa%e5%ae%9a%e4%b9%89result" onclick="onNavClick(`#自定义result-nav`)" id="自定义result-nav" class="animated-visibility">
										自定义result
									</a>
								</li>
							
							
						
					
				
					
					
						
							
							
							
							
							
								<li>
									<a href="#verifications" onclick="onNavClick(`#verifications-nav`)" id="verifications-nav" class="animated-visibility">
										Verifications
									</a>
								</li>
							
							
						
					
				
					
					
						
							
							
							
							
							
								<li>
									<a href="#withcapture" onclick="onNavClick(`#withcapture-nav`)" id="withcapture-nav" class="animated-visibility">
										withCapture
									</a>
								</li>
							
							
						
					
				
					
					
						
							
							
							
								
									<ul>
								
							
							
							
								<li>
									<a href="#%e6%96%b9%e6%b3%95%e5%8d%95%e6%ac%a1%e8%b0%83%e7%94%a8%e5%8f%82%e6%95%b0" onclick="onNavClick(`#方法单次调用参数-nav`)" id="方法单次调用参数-nav" class="animated-visibility">
										方法单次调用参数
									</a>
								</li>
							
							
						
					
				
					
					
						
							
							
							
							
							
								<li>
									<a href="#%e6%96%b9%e6%b3%95%e6%89%80%e6%9c%89%e8%b0%83%e7%94%a8%e4%bd%bf%e7%94%a8%e5%88%b0%e7%9a%84%e5%8f%82%e6%95%b0" onclick="onNavClick(`#方法所有调用使用到的参数-nav`)" id="方法所有调用使用到的参数-nav" class="animated-visibility">
										方法所有调用使用到的参数
									</a>
								</li>
							
							
						
					
				
					
					
						
							
							
							
							
							
								<li>
									<a href="#%e8%8e%b7%e5%8f%96%e6%96%b0%e5%88%9b%e5%bb%ba%e7%9a%84mocked%e7%b1%bb%e5%af%b9%e8%b1%a1" onclick="onNavClick(`#获取新创建的mocked类对象-nav`)" id="获取新创建的mocked类对象-nav" class="animated-visibility">
										获取新创建的Mocked类对象
									</a>
								</li>
							
							
						
					
				
				</ul>
			</div>
		
    </div>
</div>


<div class="post-list">
	<div class="single-post">
		<div class="post-head-wrapper">
			<div class="post-title">
				JMockit使用指南(二)
				
			</div>
			<div class="post-meta">
    <time class="post-meta-date" itemprop="datePublished">
        2023-01-09
    </time>

    <ul class="post-meta-tags">
        
        <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 28 24">
    <path d="M9.777 2l11.395 11.395-7.779 7.777-11.393-11.39v-7.782h7.777zm.828-2l-10.604.001v10.609l13.392 13.39 10.607-10.605-13.395-13.395zm-6.019 7.414c-.78-.781-.779-2.047.002-2.827.781-.782 2.047-.781 2.826-.003.783.783.782 2.049 0 2.83-.779.781-2.045.781-2.828 0zm5.824 7.947l-3.537-3.535.709-.707 3.535 3.535-.707.707zm4.242 0l-5.658-5.656.708-.708 5.657 5.657-.707.707zm2.121-2.121l-5.657-5.657.707-.707 5.657 5.657-.707.707z"/>
</svg>
        
        
            <li><a href="https://fzyho.github.io/tags/java/" title="java">java</a></li>
        
            <li><a href="https://fzyho.github.io/tags/mock/" title="mock">mock</a></li>
        
            <li><a href="https://fzyho.github.io/tags/test/" title="test">test</a></li>
        
            <li><a href="https://fzyho.github.io/tags/unit-test/" title="unit test">unit test</a></li>
        
    </ul>
</div>
		</div>
		<div class="post-body-wrapper">
			<div class="post-body" v-pre>
				
				<p>前面我们提到<strong>Record-Replay-Verify模型</strong>，在JMockit中，Expectations{}则是用于录制(Record)。</p>
<h2 id="record录制">Record(录制)<a hidden class="anchor" aria-hidden="true" href="#record录制">#</a></h2>
<p>录制类/对象的调用 Expectations代码块中，可以让特定方法调用(实例方法、静态方法皆可)输出指定的结果，而不用走原本方法内部的逻辑，并且可以指定只有当输入特定(范围)的参数时，才输出特定结果。需要注意的是，Expectations只能够改写非private且非static的非构造函数的方法。如果要仿造构造方法/静态方法，可以使用MockUp。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Test</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">testExample</span><span class="o">(</span><span class="nd">@Mocked</span> <span class="n">Example</span> <span class="n">mockInstance</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">   <span class="k">new</span> <span class="n">Expectations</span><span class="o">()</span> <span class="o">{{</span>
</span></span><span class="line"><span class="cl">      <span class="n">mockInstance</span><span class="o">.</span><span class="na">sayHello</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="s">&#34;test&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">      <span class="n">result</span> <span class="o">=</span> <span class="s">&#34;mocked&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">   <span class="o">}};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="n">Assert</span><span class="o">.</span><span class="na">assertSame</span><span class="o">(</span><span class="n">mockInstance</span><span class="o">.</span><span class="na">sayHello</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="s">&#34;test&#34;</span><span class="o">),</span> <span class="s">&#34;mocked&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">	<span class="n">Assert</span><span class="o">.</span><span class="na">assertNotSame</span><span class="o">(</span><span class="n">mockInstance</span><span class="o">.</span><span class="na">sayHello</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span><span class="s">&#34;test&#34;</span><span class="o">),</span> <span class="s">&#34;mocked&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>如上，在Expectations代码块中指定当sayHello方法被调用且参数为<code>1, &quot;test&quot;</code>时，直接返回结果<code>&quot;mocked&quot;</code>。而参数为其他值是，走原本的方法逻辑返回结果。</p>
<p>除了上述代码例子，Expectations是配合Mock实例对象(@Mocked/@Injectable/@Capturing)进行录制的。Mock对象是对方法和字段都进行mock了。但某些情况我们需要使用真实的实例，但只需要对部分方法进行结果返回修改。此时可以使用<code>Expectations(Object... )</code>构造函数，指定对象修改其方法。</p>
<p>如下代码例子，向<code>Expectations()</code>构造函数中传入参数Example实例对象<code>example1</code>以及OtherExample类，并改写sayHello()方法。可以看到Example对象的sayHello方法分别返回了不同的值，而OtherExample对象的sayHello方法则返回相同结果。另外，Expectations构造函数传入的参数并没有<code>example2</code>，但Expectations代码块中有Mock<code>example2</code>的实例方法，并且也生效了。这是因为构造函数参数只会区分是是类定义还是类实例，若是类定义则会整个类方法生效，若是类实例，则只会对代码块中mock的实例方法生效。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Test</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testExample2</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Example</span> <span class="n">example1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Example</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">Example</span> <span class="n">example2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Example</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">OtherExample</span> <span class="n">otherExample1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OtherExample</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">OtherExample</span> <span class="n">otherExample2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OtherExample</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="n">Expectations</span><span class="o">(</span><span class="n">example1</span><span class="o">,</span> <span class="n">OtherExample</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">{{</span>
</span></span><span class="line"><span class="cl">        <span class="n">example1</span><span class="o">.</span><span class="na">sayHello</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">result</span> <span class="o">=</span> <span class="s">&#34;mocked1&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">example2</span><span class="o">.</span><span class="na">sayHello</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">result</span> <span class="o">=</span> <span class="s">&#34;mocked2&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">otherExample2</span><span class="o">.</span><span class="na">sayHello</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">result</span> <span class="o">=</span> <span class="s">&#34;mocked&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">Assert</span><span class="o">.</span><span class="na">assertSame</span><span class="o">(</span><span class="s">&#34;mocked1&#34;</span><span class="o">,</span> <span class="n">example1</span><span class="o">.</span><span class="na">sayHello</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="n">Assert</span><span class="o">.</span><span class="na">assertSame</span><span class="o">(</span><span class="s">&#34;mocked2&#34;</span><span class="o">,</span> <span class="n">example2</span><span class="o">.</span><span class="na">sayHello</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="n">Assert</span><span class="o">.</span><span class="na">assertSame</span><span class="o">(</span><span class="s">&#34;mocked&#34;</span><span class="o">,</span> <span class="n">otherExample1</span><span class="o">.</span><span class="na">sayHello</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">    <span class="n">Assert</span><span class="o">.</span><span class="na">assertSame</span><span class="o">(</span><span class="s">&#34;mocked&#34;</span><span class="o">,</span> <span class="n">otherExample2</span><span class="o">.</span><span class="na">sayHello</span><span class="o">());</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="定制结果">定制结果<a hidden class="anchor" aria-hidden="true" href="#定制结果">#</a></h2>
<p>Expectations()代码块可以录制(Record)特定方法调用的返回结果。对于non-void返回类型的方法，返回结果通过对result赋值来录制。若需要调用的方法抛出异常，也可以通过对result字段赋值异常(Expectation)对象来完成。而使用<code>returns(val1, val2，...)</code>方式，可以让方法调用顺序地返回指定的结果——即val1，val2等。另外通过对result字段赋值list或者array的方式，也可以达到相同效果。当调用次数超过指定的返回结果的数量时，会返回指定的最后一个结果。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Test</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testExample3</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Example</span> <span class="n">example1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Example</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">Example</span> <span class="n">example2</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Example</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">OtherExample</span> <span class="n">otherExample1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">OtherExample</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="n">Expectations</span><span class="o">(</span><span class="n">example1</span><span class="o">,</span> <span class="n">OtherExample</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">{{</span>
</span></span><span class="line"><span class="cl">        <span class="n">example1</span><span class="o">.</span><span class="na">sayHello</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">returns</span><span class="o">(</span><span class="s">&#34;mocked1&#34;</span><span class="o">,</span> <span class="s">&#34;mocked3&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">example2</span><span class="o">.</span><span class="na">sayHello</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">result</span> <span class="o">=</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">&#34;mocked2&#34;</span><span class="o">,</span> <span class="s">&#34;mocked4&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">otherExample1</span><span class="o">.</span><span class="na">sayHello</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RuntimeException</span><span class="o">(</span><span class="s">&#34;test exception....&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="c1">// 以此输出：mocked1 mocked2 mocked3 mocked4 mocked3 mocked4 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">example1</span><span class="o">.</span><span class="na">sayHello</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="s">&#34;test&#34;</span><span class="o">)</span> <span class="o">+</span> <span class="s">&#34; &#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="n">example2</span><span class="o">.</span><span class="na">sayHello</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="s">&#34;test&#34;</span><span class="o">)</span> <span class="o">+</span> <span class="s">&#34; &#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">otherExample1</span><span class="o">.</span><span class="na">sayHello</span><span class="o">();</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="自定义result">自定义result<a hidden class="anchor" aria-hidden="true" href="#自定义result">#</a></h2>
<p>当生成期望结果result的逻辑比较复杂时，可能很难直接对result直接赋值对象实例。此时可以采用<strong>Delegate</strong>的方式去编写一个生成返回结果的代码逻辑方法。如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Test</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testExample4</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Example</span> <span class="n">example1</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Example</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="n">Expectations</span><span class="o">(</span><span class="n">example1</span><span class="o">,</span> <span class="n">OtherExample</span><span class="o">.</span><span class="na">class</span><span class="o">)</span> <span class="o">{{</span>
</span></span><span class="line"><span class="cl">        <span class="n">example1</span><span class="o">.</span><span class="na">sayHello</span><span class="o">(</span><span class="n">anyInt</span><span class="o">,</span> <span class="n">anyString</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Delegate</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">String</span> <span class="nf">toDelegate</span><span class="o">(</span><span class="kt">int</span> <span class="n">num</span><span class="o">,</span> <span class="n">String</span> <span class="n">str</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="o">?</span> <span class="s">&#34;mock&#34;</span> <span class="o">+</span> <span class="n">num</span> <span class="o">:</span> <span class="n">str</span> <span class="o">+</span> <span class="n">num</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">new</span> <span class="n">OtherExample</span><span class="o">(</span><span class="n">anyInt</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">result</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Delegate</span><span class="o">()</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">            <span class="kt">void</span> <span class="nf">constructorDelegate</span><span class="o">(</span><span class="kt">int</span> <span class="n">ee</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">                <span class="k">throw</span> <span class="k">new</span> <span class="n">RuntimeException</span><span class="o">(</span><span class="s">&#34;can not create Other Example...&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">            <span class="o">}</span>
</span></span><span class="line"><span class="cl">        <span class="o">};</span>
</span></span><span class="line"><span class="cl">    <span class="o">}};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">example1</span><span class="o">.</span><span class="na">sayHello</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span> <span class="s">&#34;test&#34;</span><span class="o">)</span> <span class="o">+</span> <span class="s">&#34; &#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">example1</span><span class="o">.</span><span class="na">sayHello</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span> <span class="s">&#34;test&#34;</span><span class="o">)</span> <span class="o">+</span> <span class="s">&#34; &#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="n">OtherExample</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Delegate相当于一个接口类，其实现方法的方法名可以是任意名字(符合java的方法名规范即可)，方法必须是non-private的访问权限。而方法参数必须与要录制的方法的参数类型一致，或者是为无参数方法。另外，Delegate方法的第一个参数可以Invocation类型，用以在replay阶段录制的方法被调用，获取调用该方法的实例对象以及传入的真实参数。</p>
<h2 id="verifications">Verifications<a hidden class="anchor" aria-hidden="true" href="#verifications">#</a></h2>
<p>Verifications{}代码块可用于验证Mock对象调用某个方法的情况是否符合预期——调用了多少次，调用该方法调用的参数是否符合预期。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Test</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testExample</span><span class="o">(</span><span class="nd">@Injectable</span> <span class="n">VerificationExample</span> <span class="n">example</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">example</span><span class="o">.</span><span class="na">voidMethod</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">example</span><span class="o">.</span><span class="na">voidMethod</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">example</span><span class="o">.</span><span class="na">stringReturningMethod</span><span class="o">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="n">Verifications</span><span class="o">()</span> <span class="o">{{</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 没有设定次数时，默认需要调用至少一次
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">example</span><span class="o">.</span><span class="na">voidMethod</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// 1 to 5 invocations are expected:
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">example</span><span class="o">.</span><span class="na">stringReturningMethod</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">minTimes</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">maxTimes</span> <span class="o">=</span> <span class="mi">5</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">result</span><span class="o">=</span><span class="s">&#34;Injectable...&#34;</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">    <span class="o">}};</span>
</span></span><span class="line"><span class="cl">	<span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>Verifications</code>类只有公开的一个无参的构造函数，因此只能对<code>@Injectable</code>、<code>@Mocked</code>等Mock出来的类/对象进行验证，而不能像<code>Expectations</code>那样通过传参来进行指定对象方法的验证。不过在实际的程序测试中，我们对于类的某个方法有没调用，调用多少次的测试场景并不是太多；一般都可以通过Assert的方式对程序结果进行验证。</p>
<p>Verifications有三个子类<code>VerificationsInOrder</code>，<code>FullVerifications</code>以及二者的结合<code>FullVerificationsInOrder</code>。</p>
<ol>
<li>VerificationsInOrder和Verification是相似的，但是加上了方法调用顺序的验证。如下如果在voidMethod方法调用之前调用stringReturningMethod，程序运行就会抛出异常——在调用stringReturningMethod之前<strong>Missing invocation</strong>(缺少依赖的方法调用)。</li>
<li>如果需要验证<strong>有且仅有</strong>Verifications()代码块中的仿造对象方法有被调用到，可以使用new FullVerifications() {&hellip;}。如下如果FullVerifications代码块中注释掉<code>example.voidMethod();</code>，程序也会运行失败。</li>
</ol>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Test</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testExample</span><span class="o">(</span><span class="nd">@Injectable</span> <span class="n">VerificationExample</span> <span class="n">example</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">example</span><span class="o">.</span><span class="na">voidMethod</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">example</span><span class="o">.</span><span class="na">voidMethod</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="n">example</span><span class="o">.</span><span class="na">stringReturningMethod</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="n">VerificationsInOrder</span><span class="o">()</span> <span class="o">{{</span>
</span></span><span class="line"><span class="cl">        <span class="n">example</span><span class="o">.</span><span class="na">voidMethod</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">example</span><span class="o">.</span><span class="na">stringReturningMethod</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="n">FullVerifications</span><span class="o">()</span> <span class="o">{{</span>
</span></span><span class="line"><span class="cl">        <span class="n">example</span><span class="o">.</span><span class="na">voidMethod</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">example</span><span class="o">.</span><span class="na">stringReturningMethod</span><span class="o">();</span>
</span></span><span class="line"><span class="cl">    <span class="o">}};</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="withcapture">withCapture<a hidden class="anchor" aria-hidden="true" href="#withcapture">#</a></h2>
<p>在Verifications代码块中，Jmockit提供<code>withCapture(...)</code>语法用于获取测试过程中仿造的类生成过的对象或者仿造对象的方法调用传入过的参数。</p>
<ul>
<li>获取某个仿造方法中最后一次调用传入的参数，<code>withCapture()</code></li>
<li>获取某个仿造方法所有调用传入的参数，<code>withCapture(List&lt;T&gt;)</code>，T为某个参数的类型</li>
<li>获取仿造的构造函数或者仿造类(Mocked修饰)的new方法调用生成的对象/所有对象，<code>withCapture()</code>/<code>withCapture(List&lt;T&gt;)</code></li>
</ul>
<h3 id="方法单次调用参数">方法单次调用参数<a hidden class="anchor" aria-hidden="true" href="#方法单次调用参数">#</a></h3>
<p>如果测试过程中，方法多次被调用，最后一次调用的参数会被capture。<code>withCapture()</code>只能下Verifications中使用。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Test</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testCapture</span><span class="o">(</span><span class="nd">@Mocked</span> <span class="n">VerificationExample</span> <span class="n">mock</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="n">VerificationExample</span><span class="o">().</span><span class="na">doSomething</span><span class="o">(</span><span class="mf">0.1</span><span class="o">,</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="mi">2</span><span class="o">],</span> <span class="s">&#34;test&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="n">Verifications</span><span class="o">()</span> <span class="o">{{</span>
</span></span><span class="line"><span class="cl">        <span class="kt">double</span> <span class="n">d</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">String</span> <span class="n">s</span><span class="o">;</span>
</span></span><span class="line"><span class="cl">        <span class="n">mock</span><span class="o">.</span><span class="na">doSomething</span><span class="o">(</span><span class="n">d</span> <span class="o">=</span> <span class="n">withCapture</span><span class="o">(),</span> <span class="kc">null</span><span class="o">,</span> <span class="n">s</span> <span class="o">=</span> <span class="n">withCapture</span><span class="o">());</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">Assert</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="mf">0.1d</span><span class="o">,</span> <span class="n">d</span><span class="o">,</span> <span class="mf">0.0</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">Assert</span><span class="o">.</span><span class="na">assertSame</span><span class="o">(</span><span class="n">s</span><span class="o">,</span> <span class="s">&#34;test&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="o">}};</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="方法所有调用使用到的参数">方法所有调用使用到的参数<a hidden class="anchor" aria-hidden="true" href="#方法所有调用使用到的参数">#</a></h3>
<p>与<code>withCapture()</code>不同，<code>withCapture(List)</code>可以用在Verifications，也可以用在Expectations。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Test</span>
</span></span><span class="line"><span class="cl"><span class="kd">public</span> <span class="kt">void</span> <span class="nf">testCaptures</span><span class="o">(</span><span class="nd">@Mocked</span> <span class="n">VerificationExample</span> <span class="n">mock</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="n">VerificationExample</span><span class="o">().</span><span class="na">doSomething</span><span class="o">(</span><span class="mf">0.1</span><span class="o">,</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="mi">2</span><span class="o">],</span> <span class="s">&#34;test&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="n">VerificationExample</span><span class="o">().</span><span class="na">doSomething</span><span class="o">(</span><span class="mf">0.2</span><span class="o">,</span> <span class="k">new</span> <span class="kt">int</span><span class="o">[</span><span class="mi">2</span><span class="o">],</span> <span class="s">&#34;test2&#34;</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">new</span> <span class="n">Verifications</span><span class="o">()</span> <span class="o">{{</span>
</span></span><span class="line"><span class="cl">        <span class="n">List</span><span class="o">&lt;</span><span class="n">Double</span><span class="o">&gt;</span> <span class="n">doubles</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl">        <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">strings</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl">        <span class="n">mock</span><span class="o">.</span><span class="na">doSomething</span><span class="o">(</span><span class="n">withCapture</span><span class="o">(</span><span class="n">doubles</span><span class="o">),</span> <span class="kc">null</span><span class="o">,</span> <span class="n">withCapture</span><span class="o">(</span><span class="n">strings</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">doubles</span><span class="o">);</span> <span class="c1">// [0.1, 0.2]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">strings</span><span class="o">);</span> <span class="c1">// [test, test2]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="o">}};</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="获取新创建的mocked类对象">获取新创建的Mocked类对象<a hidden class="anchor" aria-hidden="true" href="#获取新创建的mocked类对象">#</a></h3>
<p><code>withCapture</code>还可以用来获取指定Mocked的类的所有创建对象。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-java" data-lang="java"><span class="line"><span class="cl"><span class="nd">@Test</span>
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="nf">capturingNewInstances</span><span class="o">(</span><span class="nd">@Mocked</span> <span class="n">Person</span> <span class="n">mockedPerson</span><span class="o">)</span> <span class="o">{</span>
</span></span><span class="line"><span class="cl">   <span class="n">dao</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="s">&#34;Paul&#34;</span><span class="o">,</span> <span class="mi">10</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">   <span class="n">dao</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="s">&#34;Mary&#34;</span><span class="o">,</span> <span class="mi">15</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">   <span class="n">dao</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="s">&#34;Joe&#34;</span><span class="o">,</span> <span class="mi">20</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">   <span class="k">new</span> <span class="n">Verifications</span><span class="o">()</span> <span class="o">{{</span>
</span></span><span class="line"><span class="cl">       <span class="c1">// 获取到目前为止所有Mocked的Person对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="n">personsInstantiated</span> <span class="o">=</span> <span class="n">withCapture</span><span class="o">(</span><span class="k">new</span> <span class="n">Person</span><span class="o">(</span><span class="n">anyString</span><span class="o">,</span> <span class="n">anyInt</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c1">// 使用withCapture获取create()方法的参数对象
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="n">List</span><span class="o">&lt;</span><span class="n">Person</span><span class="o">&gt;</span> <span class="n">personsCreated</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;();</span>
</span></span><span class="line"><span class="cl">      <span class="n">dao</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">withCapture</span><span class="o">(</span><span class="n">personsCreated</span><span class="o">));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="c1">// 可以得出，personsInstantiated和personsCreated列表中所有元素都是相同的
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="n">assertEquals</span><span class="o">(</span><span class="n">personsInstantiated</span><span class="o">,</span> <span class="n">personsCreated</span><span class="o">);</span>
</span></span><span class="line"><span class="cl">   <span class="o">}};</span>
</span></span><span class="line"><span class="cl"><span class="o">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div>
			</div>
			<div class="post-copyright">
				<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">
	<img alt="知识共享许可协议" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/4.0/88x31.png" />
</a>
<br />本作品采用
<a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/">知识共享署名-非商业性使用 4.0 国际许可协议</a>
进行许可。
<br />
转载时请附上原文链接以注明出处，图片在使用时请保留全部内容(可适当缩放)并附上图片所属的文章链接。若进行商业性使用，请先联系笔者获取许可。
			</div>
		</div>
		<div class="post-footer-wrapper">
			<hr class="hr-fade"/>
			<div class="post-comment-wrapper"></div> 
		</div>
	</div>
</div>

</main>
	</body>
</html>
